---
layout: with-sidebar
title: Long V. Wide Data using R
sidebar: publisher
type: example
audience: publisher
author: stuagano
---

Heres data from the World Bank on GDP Growth Rates.  As you can see it is stored in long form and can use some "masaging" in order to work optimally in Socrata visualizations.  This transformation is typically called long V wide form. 

| Country Name | Country Code | Indicator Name        | Indicator Code    | 1960 | 1961 | 1962 | 1963 | 1964 | 1965 | 1966 | 1967 | 1968 | 1969 | 1970 | 1971        | 1972        | 1973        | 1974        | 1975        | 1976        | 1977        | 1978        | 1979        | 1980        | 1981         | 1982         | 1983         | 1984         | 1985         | 1986        | 1987         | 1988         | 1989        | 1990         | 1991         | 1992         | 1993         | 1994        | 1995        | 1996        | 1997         | 1998        | 1999        | 2000         | 2001         | 2002        | 2003        | 2004        | 2005        | 2006        | 2007         | 2008         | 2009         | 2010         | 2011         | 2012         | 2013         | 2014        | 2015 |
|--------------|--------------|-----------------------|-------------------|------|------|------|------|------|------|------|------|------|------|------|-------------|-------------|-------------|-------------|-------------|-------------|-------------|-------------|-------------|-------------|--------------|--------------|--------------|--------------|--------------|-------------|--------------|--------------|-------------|--------------|--------------|--------------|--------------|-------------|-------------|-------------|--------------|-------------|-------------|--------------|--------------|-------------|-------------|-------------|-------------|-------------|--------------|--------------|--------------|--------------|--------------|--------------|--------------|-------------|------|
| Aruba        | ABW          | GDP growth (annual %) | NY.GDP.MKTP.KD.ZG |      |      |      |      |      |      |      |      |      |      |      |             |             |             |             |             |             |             |             |             |             |              |              |              |              |              |             |              |              |             |              |              |              |              |             | 1.245085912 | 7.814431719 | 6.66662183   | 1.154469392 | 4.514062033 | -0.364695779 | -2.164459409 | 0.465289865 | 7.519472373 | 1.176690484 | 0.380390971 | 2.355119443 | -3.654626242 | -6.881302064 | -5.653502086 |              |              |              |              |             |      |
| Andorra      | AND          | GDP growth (annual %) | NY.GDP.MKTP.KD.ZG |      |      |      |      |      |      |      |      |      |      |      | 4.649473525 | 8.149745709 | 7.788465414 | 5.618785784 | 0.542203245 | 3.303791457 | 2.838574307 | 1.463003413 | 0.041546518 | 2.208728144 | -0.132468704 | 1.246461733  | 1.770115807  | 1.784687569  | 2.321435854  | 3.253321681 | 5.547122593  | 5.094324232  | 4.827030278 | 3.781393478  | 2.546000641  | 0.929215383  | -1.031491714 | 2.383195277 | 2.757493977 | 4.649741959 | 9.067673964  | 3.194787965 | 4.099081148 | 1.165787064  | 6.066780597  | 6.426845139 | 12.02391974 | 8.069504291 | 7.839704496 | 4.585310593 | 0.078039378  | -8.594256008 | -3.817986024 | -5.347977181 | -4.802675037 | -1.760010328 | -0.063514313 |             |      |
| Afghanistan  | AFG          | GDP growth (annual %) | NY.GDP.MKTP.KD.ZG |      |      |      |      |      |      |      |      |      |      |      |             |             |             |             |             |             |             |             |             |             |              |              |              |              |              |             |              |              |             |              |              |              |              |             |             |             |              |             |             |              |              |             | 8.444163227 | 1.055555787 | 11.17527024 | 5.554137623 | 13.74020499  | 3.611368392  | 21.02064874  | 8.433290482  | 6.113685169  | 14.43474129  | 1.959122899  | 1.312530908 |      |
| Angola       | AGO          | GDP growth (annual %) | NY.GDP.MKTP.KD.ZG |      |      |      |      |      |      |      |      |      |      |      |             |             |             |             |             |             |             |             |             |             |              |              |              |              |              | 2.800000008 | 7.900000004  | 5.599999981  | 0.400000019 | -0.300000019 | -1.199999994 | -6.899999994 | -24.7        | 3.500000006 | 10.4        | 11.19999997 | 7.900000022  | 6.804762105 | 3.239799677 | 3.012076166  | 4.220965156  | 13.82179251 |             |             |             |             |              |              |              |              |              |              |              |             |      |
| Albania      | ALB          | GDP growth (annual %) | NY.GDP.MKTP.KD.ZG |      |      |      |      |      |      |      |      |      |      |      |             |             |             |             |             |             |             |             |             |             | 5.745635266  | 2.948596802  | 1.104938266  | -1.251596644 | 1.780643958  | 5.637243196 | -0.787842649 | -1.420039678 | 9.836548993 | -9.575640187 | -29.58899768 | -7.199999987 | 9.600000012  | 8.299999997 | 13.29999999 | 9.1         | -10.83785573 | 9.00885254  | 13.50117338 | 6.666620515  | 7.940331421  | 4.231371012 | 5.77349057  | 5.709556581 | 5.720819953 | 5.431012734 | 5.9          | 7.53         | 3.35         | 3.71         | 2.55         | 1.42         | 1.11         | 2.17        |      |
| Arab World   | ARB          | GDP growth (annual %) | NY.GDP.MKTP.KD.ZG |      |      |      |      |      |      |      |      |      |      |      |             |             |             |             |             | 12.60122516 | 8.298998395 | 1.674562132 | 10.28398808 | 9.586066132 | 4.200516832  | -3.640696544 | -2.856583281 | 1.373144378  | -0.709690552 | 0.413388325 | 0.122365198  | 4.358036673  | 1.901193597 | 9.736370165  | 1.397233261  | 4.895711385  | 3.614019302  | 3.533169062 | 2.736176506 | 4.793786889 | 4.250490927  | 4.715284511 | 2.223526746 | 4.966278313  | 2.355654473  | 1.786087698 | 5.210411699 | 9.134031991 | 6.224418243 | 7.228029021 | 5.738490164  | 6.337478784  | 1.48520826   | 4.699088578  | 3.469317602  | 6.610002445  | 2.830243732  | 2.221650145 |      |

{% highlight R %}
install.packages("dplyr")
install.packages("tidyr")

long.DF <- gather(GDP.Growth.Rate.,year,GDPGrowth,X1961:X2015, na.rm = TRUE)

socrataEmail <- Sys.getenv("SOCRATA_EMAIL", "stuart.gano@socrata.com")
socrataPassword <- Sys.getenv("SOCRATA_PASSWORD", "Wakeboard1")

datasetToAddToUrl <- "https://opendata.socrata.com/resource/qvqx-yuvy.json"
write.socrata(long.DF,datasetToAddToUrl,"UPSERT",socrataEmail,socrataPassword
{% endhighlight %}


Using Socrata to Visualize the Data.

<div><iframe width="500px" title="Average GDP Growth by Country" height="425px" src="https://opendata.socrata.com/w/u2pr-5qx3/y34g-bnf3?cur=dLSf7ZOrZmT&from=root" frameborder="0"scrolling="no"><a href="https://opendata.socrata.com/dataset/Average-GDP-Growth-by-Country/u2pr-5qx3" title="Average GDP Growth by Country" target="_blank">Average GDP Growth by Country</a></iframe><p><a href="http://www.socrata.com/" target="_blank">Powered by Socrata</a></p></div>

![Link to the code on Github](https://github.com/stuagano/R_Projects/tree/master/Tidyr%20and%20Dyplr) go take a look. 